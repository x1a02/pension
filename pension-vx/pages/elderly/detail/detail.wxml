<view class="container">
  <navigation-bar title="è€äººè¯¦æƒ…" color="black" background="#FFF"></navigation-bar>

  <scroll-view class="scrollarea" scroll-y type="list">
    <view class="content" wx:if="{{elderly}}">

      <!-- å¤´éƒ¨ä¸ªäººä¿¡æ¯å¡ç‰‡ -->
      <view class="profile-card">
        <view class="avatar-section">
          <view class="large-avatar">
            <text class="large-avatar-text">{{elderly.name.charAt(0)}}</text>
          </view>
          <view class="profile-name-area">
            <text class="profile-name">{{elderly.name}}</text>
            <view class="profile-tags">
              <text class="profile-tag">{{elderly.age}}å²</text>
              <text class="profile-tag">{{elderly.gender === 1 ? 'ç”·' : 'å¥³'}}</text>
            </view>
          </view>
        </view>
      </view>

      <!-- åŸºæœ¬ä¿¡æ¯ -->
      <view class="section-card">
        <view class="section-title">
          <text class="title-icon">ğŸ“‹</text>
          <text class="title-text">åŸºæœ¬ä¿¡æ¯</text>
        </view>

        <view class="info-grid">
          <view class="grid-item">
            <text class="item-label">å§“å</text>
            <text class="item-value">{{elderly.name}}</text>
          </view>
          <view class="grid-item">
            <text class="item-label">æ€§åˆ«</text>
            <text class="item-value">{{elderly.gender === 1 ? 'ç”·' : 'å¥³'}}</text>
          </view>
          <view class="grid-item">
            <text class="item-label">å¹´é¾„</text>
            <text class="item-value">{{elderly.age}}å²</text>
          </view>
          <view class="grid-item">
            <text class="item-label">èº«ä»½è¯</text>
            <text class="item-value">{{elderly.idCard || 'æœªå¡«å†™'}}</text>
          </view>
        </view>

        <view class="info-row" wx:if="{{elderly.phone}}">
          <text class="row-label">è”ç³»ç”µè¯</text>
          <text class="row-value phone-value" bindtap="makeCall">{{elderly.phone}}</text>
        </view>

        <view class="info-row" wx:if="{{elderly.address}}">
          <text class="row-label">å±…ä½åœ°å€</text>
          <text class="row-value">{{elderly.address}}</text>
        </view>
      </view>

      <!-- ç´§æ€¥è”ç³»äºº -->
      <view class="section-card">
        <view class="section-title">
          <text class="title-icon">ğŸš¨</text>
          <text class="title-text">ç´§æ€¥è”ç³»äºº</text>
        </view>

        <view class="emergency-contact">
          <view class="contact-row">
            <text class="contact-label">è”ç³»äºº</text>
            <text class="contact-value">{{elderly.emergencyContact || 'æœªå¡«å†™'}}</text>
          </view>
          <view class="contact-row" wx:if="{{elderly.emergencyPhone}}">
            <text class="contact-label">ç”µè¯</text>
            <text class="contact-value phone-value" bindtap="callEmergencyContact">{{elderly.emergencyPhone}}</text>
          </view>
        </view>
      </view>

      <!-- å¥åº·çŠ¶å†µ -->
      <view class="section-card" wx:if="{{elderly.healthStatus}}">
        <view class="section-title">
          <text class="title-icon">ğŸ’Š</text>
          <text class="title-text">å¥åº·çŠ¶å†µ</text>
        </view>

        <view class="health-status-box">
          <text class="health-status-text">{{elderly.healthStatus}}</text>
        </view>
      </view>

      <!-- æœ€è¿‘å¥åº·è®°å½• -->
      <view class="section-card">
        <view class="section-header">
          <view class="section-title">
            <text class="title-icon">ğŸ“Š</text>
            <text class="title-text">æœ€è¿‘å¥åº·è®°å½•</text>
          </view>
          <text class="view-all-btn" bindtap="viewAllHealthRecords">æŸ¥çœ‹å…¨éƒ¨ â†’</text>
        </view>

        <view class="health-records">
          <view class="health-record-item" wx:for="{{healthRecords}}" wx:key="id">
            <view class="record-date">
              <text class="date-icon">ğŸ“…</text>
              <text class="date-text">{{item.recordDate}}</text>
            </view>
            <view class="record-data">
              <text class="data-badge" wx:if="{{item.bloodPressure}}">è¡€å‹ {{item.bloodPressure}}</text>
              <text class="data-badge" wx:if="{{item.heartRate}}">å¿ƒç‡ {{item.heartRate}}</text>
              <text class="data-badge" wx:if="{{item.bloodSugar}}">è¡€ç³– {{item.bloodSugar}}</text>
            </view>
          </view>

          <view class="empty-health" wx:if="{{healthRecords.length === 0}}">
            <text class="empty-health-text">æš‚æ— å¥åº·è®°å½•</text>
          </view>
        </view>
      </view>

    </view>
  </scroll-view>
</view>
